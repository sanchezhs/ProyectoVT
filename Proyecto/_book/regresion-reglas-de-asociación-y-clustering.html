<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Regresion, reglas de asociación y Clustering | Virus Total</title>
  <meta name="description" content="Este libro de bookdown contiene el proyecto LCC sobre analizar el dataset de VirusTotal." />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Regresion, reglas de asociación y Clustering | Virus Total" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Este libro de bookdown contiene el proyecto LCC sobre analizar el dataset de VirusTotal." />
  <meta name="github-repo" content="https://github.com/samuel-uma/ProyectoVT" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Regresion, reglas de asociación y Clustering | Virus Total" />
  
  <meta name="twitter:description" content="Este libro de bookdown contiene el proyecto LCC sobre analizar el dataset de VirusTotal." />
  

<meta name="author" content="Samuel Sánchez Toca y Alejandro Medina Astorga" />


<meta name="date" content="2022-06-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="analizando-el-ssdeep.html"/>
<link rel="next" href="footnotes-and-citations.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> url: your book url like <span>https://bookdown.org/yihui/bookdown</span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#inicio"><i class="fa fa-check"></i><b>1.1</b> Inicio</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#renombrando-los-archivos"><i class="fa fa-check"></i><b>1.2</b> Renombrando los archivos</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#datos-iniciales"><i class="fa fa-check"></i><b>1.3</b> Datos iniciales</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#preprocesado"><i class="fa fa-check"></i><b>1.4</b> Preprocesado</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="url-your-book-url-like-httpsbookdown.orgyihuibookdown-1.html"><a href="url-your-book-url-like-httpsbookdown.orgyihuibookdown-1.html"><i class="fa fa-check"></i><b>2</b> url: your book url like <span>https://bookdown.org/yihui/bookdown</span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="url-your-book-url-like-httpsbookdown.orgyihuibookdown-1.html"><a href="url-your-book-url-like-httpsbookdown.orgyihuibookdown-1.html#dplyr"><i class="fa fa-check"></i><b>2.1</b> Dplyr</a></li>
<li class="chapter" data-level="2.2" data-path="url-your-book-url-like-httpsbookdown.orgyihuibookdown-1.html"><a href="url-your-book-url-like-httpsbookdown.orgyihuibookdown-1.html#visualizacion"><i class="fa fa-check"></i><b>2.2</b> Visualizacion</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html"><i class="fa fa-check"></i><b>3</b> Analizando el <em>ssdeep</em></a>
<ul>
<li class="chapter" data-level="3.1" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#sample1.c"><i class="fa fa-check"></i><b>3.1</b> sample1.c</a></li>
<li class="chapter" data-level="3.2" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#sample2.c"><i class="fa fa-check"></i><b>3.2</b> sample2.c</a></li>
<li class="chapter" data-level="3.3" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#sample3.c"><i class="fa fa-check"></i><b>3.3</b> sample3.c</a></li>
<li class="chapter" data-level="3.4" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#analizando-los-json"><i class="fa fa-check"></i><b>3.4</b> Analizando los json</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#matriz-de-adyacencias"><i class="fa fa-check"></i><b>3.4.1</b> Matriz de adyacencias</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#grafos"><i class="fa fa-check"></i><b>3.5</b> Grafos</a></li>
<li class="chapter" data-level="3.6" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#grafo-completo-g1"><i class="fa fa-check"></i><b>3.6</b> Grafo completo, G1</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#análisis-del-componente"><i class="fa fa-check"></i><b>3.6.1</b> Análisis del componente</a></li>
<li class="chapter" data-level="3.6.2" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#algunos-gráficos-de-g1"><i class="fa fa-check"></i><b>3.6.2</b> Algunos gráficos de G1</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#grafo-de-distancias-10-para-g"><i class="fa fa-check"></i><b>3.7</b> Grafo de distancias &lt;= 10 para G</a></li>
<li class="chapter" data-level="3.8" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#análisis-del-mayor-componente-de-g"><i class="fa fa-check"></i><b>3.8</b> Análisis del mayor componente de G</a></li>
<li class="chapter" data-level="3.9" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#analizando-los-resultados-de-los-antivirus-de-g"><i class="fa fa-check"></i><b>3.9</b> Analizando los resultados de los antivirus de G</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="regresion-reglas-de-asociación-y-clustering.html"><a href="regresion-reglas-de-asociación-y-clustering.html"><i class="fa fa-check"></i><b>4</b> Regresion, reglas de asociación y Clustering</a>
<ul>
<li class="chapter" data-level="4.1" data-path="regresion-reglas-de-asociación-y-clustering.html"><a href="regresion-reglas-de-asociación-y-clustering.html#regresion"><i class="fa fa-check"></i><b>4.1</b> Regresion</a></li>
<li class="chapter" data-level="4.2" data-path="regresion-reglas-de-asociación-y-clustering.html"><a href="regresion-reglas-de-asociación-y-clustering.html#reglas-de-asociación"><i class="fa fa-check"></i><b>4.2</b> Reglas de asociación</a></li>
<li class="chapter" data-level="4.3" data-path="regresion-reglas-de-asociación-y-clustering.html"><a href="regresion-reglas-de-asociación-y-clustering.html#clustering"><i class="fa fa-check"></i><b>4.3</b> Clustering</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html"><i class="fa fa-check"></i><b>5</b> Footnotes and citations</a>
<ul>
<li class="chapter" data-level="5.1" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html#footnotes"><i class="fa fa-check"></i><b>5.1</b> Footnotes</a></li>
<li class="chapter" data-level="5.2" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html#citations"><i class="fa fa-check"></i><b>5.2</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="blocks.html"><a href="blocks.html"><i class="fa fa-check"></i><b>6</b> Blocks</a>
<ul>
<li class="chapter" data-level="6.1" data-path="blocks.html"><a href="blocks.html#equations"><i class="fa fa-check"></i><b>6.1</b> Equations</a></li>
<li class="chapter" data-level="6.2" data-path="blocks.html"><a href="blocks.html#theorems-and-proofs"><i class="fa fa-check"></i><b>6.2</b> Theorems and proofs</a></li>
<li class="chapter" data-level="6.3" data-path="blocks.html"><a href="blocks.html#callout-blocks"><i class="fa fa-check"></i><b>6.3</b> Callout blocks</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sharing-your-book.html"><a href="sharing-your-book.html"><i class="fa fa-check"></i><b>7</b> Sharing your book</a>
<ul>
<li class="chapter" data-level="7.1" data-path="sharing-your-book.html"><a href="sharing-your-book.html#publishing"><i class="fa fa-check"></i><b>7.1</b> Publishing</a></li>
<li class="chapter" data-level="7.2" data-path="sharing-your-book.html"><a href="sharing-your-book.html#pages"><i class="fa fa-check"></i><b>7.2</b> 404 pages</a></li>
<li class="chapter" data-level="7.3" data-path="sharing-your-book.html"><a href="sharing-your-book.html#metadata-for-sharing"><i class="fa fa-check"></i><b>7.3</b> Metadata for sharing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Virus Total</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regresion-reglas-de-asociación-y-clustering" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Regresion, reglas de asociación y Clustering<a href="regresion-reglas-de-asociación-y-clustering.html#regresion-reglas-de-asociación-y-clustering" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="regresion" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Regresion<a href="regresion-reglas-de-asociación-y-clustering.html#regresion" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-4"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-5"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-6" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;~/LCC/ProyectoVT/Proyecto/virusTotal.csv&#39;</span>)</span>
<span id="cb1-7"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-8" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span> </span>
<span id="cb1-9"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">substr</span>(virusTotal<span class="sc">$</span>first_seen, <span class="dv">0</span>, <span class="dv">4</span>))</span>
<span id="cb1-10"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-11" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span></span>
<span id="cb1-12"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">country =</span> submission.submitter_country)</span>
<span id="cb1-13"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-14" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span></span>
<span id="cb1-15"><a href="regresion-reglas-de-asociación-y-clustering.html#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">file_type =</span> additional_info.exiftool.FileType)</span></code></pre></div>
<p>Ahora el tamaño de los archivos lo pasamos a gb para un manejo mas fácil</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb2-1" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">size =</span> virusTotal<span class="sc">$</span>size<span class="sc">/</span><span class="dv">1000000</span>)</span></code></pre></div>
<p>Vamos a ver todas las graficas de nuestro dataset:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(virusTotal)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Como vemos no parece que tengamos una relación directa por parte de dos variables, hemos pensado que estaría
bien analizar o ver si hay una relacion entre el tamaño que tiene un archivo y si es positivo o no ya que
podriamos pensar de que al pesar mas un archivo es mas propenso a traer algun tipo de software malicioso.</p>
<p>Vamos a analizar el tamaño frente al numero de positivos para ver si existe algun tipo de correlacion</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb4-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(virusTotal,<span class="fu">aes</span>(<span class="at">x=</span>size, <span class="at">y=</span>positives))<span class="sc">+</span><span class="fu">geom_point</span>()<span class="sc">+</span><span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb5-1" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(positives<span class="sc">~</span>size, <span class="at">data =</span> virusTotal)</span>
<span id="cb5-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(f1)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-4-2.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-4-3.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-4-4.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-4-5.png" width="672" /></p>
<p>Y aqui vemos todas las graficas disponibles</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(f1)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = positives ~ size, data = virusTotal)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -6.8717 -2.9135 -0.8898  3.0855 15.3370 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 21.91526    0.34738  63.088  &lt; 2e-16 ***
## size        -0.06463    0.01984  -3.258  0.00134 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 4.45 on 181 degrees of freedom
## Multiple R-squared:  0.0554, Adjusted R-squared:  0.05018 
## F-statistic: 10.62 on 1 and 181 DF,  p-value: 0.001339</code></pre>
<p>De aqui podemos sacar que la correlacion es practicamente nula, solo el 5,54% de la
variabilidad de los positivos tiene que ver con el tamaño, por lo tanto nuestro primer acercamiento
es erroneo.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(virusTotal, <span class="fu">aes</span>(<span class="at">x =</span> size, <span class="at">y =</span> positives)) <span class="sc">+</span></span>
<span id="cb8-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb8-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> size, <span class="at">y =</span> <span class="fu">predict</span>(f1,virusTotal)),<span class="at">col=</span><span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Sin embargo con la grafica en el que vemos la prediccion, observamos que la tendencia es a tener menor numero de positivos cuanto mayor sea el tamaño del archivo analizado</p>
</div>
<div id="reglas-de-asociación" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Reglas de asociación<a href="regresion-reglas-de-asociación-y-clustering.html#reglas-de-asociación" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span></code></pre></div>
<p>Utilizando apriori vamos a ver las reglas de nuestro dataset</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb10-1" aria-hidden="true" tabindex="-1"></a>mis_reglas <span class="ot">&lt;-</span> <span class="fu">apriori</span>(virusTotal,  <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.28818</span>, <span class="at">conf =</span> <span class="fl">0.27634</span>,<span class="at">minlen=</span><span class="dv">2</span>))</span></code></pre></div>
<pre><code>## Apriori
## 
## Parameter specification:
##  confidence minval smax arem  aval originalSupport maxtime support minlen
##     0.27634    0.1    1 none FALSE            TRUE       5 0.28818      2
##  maxlen target  ext
##      10  rules TRUE
## 
## Algorithmic control:
##  filter tree heap memopt load sort verbose
##     0.1 TRUE TRUE  FALSE TRUE    2    TRUE
## 
## Absolute minimum support count: 52 
## 
## set item appearances ...[0 item(s)] done [0.00s].
## set transactions ...[405 item(s), 183 transaction(s)] done [0.00s].
## sorting and recoding items ... [18 item(s)] done [0.00s].
## creating transaction tree ... done [0.00s].
## checking subsets of size 1 2 3 4 done [0.00s].
## writing ... [69 rule(s)] done [0.00s].
## creating S4 object  ... done [0.00s].</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(mis_reglas)</span></code></pre></div>
<pre><code>## [1] 69</code></pre>
<p>Este es el numero de reglas que podemos encontrar en nuestro dataset
El resumen de las reglas obtenidas seria el siguiente:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mis_reglas)</span></code></pre></div>
<pre><code>## set of 69 rules
## 
## rule length distribution (lhs + rhs):sizes
##  2  3  4 
## 34 27  8 
## 
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   2.000   2.000   3.000   2.623   3.000   4.000 
## 
## summary of quality measures:
##     support         confidence        coverage           lift      
##  Min.   :0.2896   Min.   :0.4240   Min.   :0.2896   Min.   :1.158  
##  1st Qu.:0.2951   1st Qu.:0.5760   1st Qu.:0.3060   1st Qu.:1.402  
##  Median :0.3060   Median :0.9310   Median :0.3661   Median :1.500  
##  Mean   :0.3397   Mean   :0.8164   Mean   :0.4468   Mean   :1.642  
##  3rd Qu.:0.3169   3rd Qu.:1.0000   3rd Qu.:0.5519   3rd Qu.:1.778  
##  Max.   :0.6339   Max.   :1.0000   Max.   :0.6831   Max.   :3.155  
##      count       
##  Min.   : 53.00  
##  1st Qu.: 54.00  
##  Median : 56.00  
##  Mean   : 62.17  
##  3rd Qu.: 58.00  
##  Max.   :116.00  
## 
## mining info:
##        data ntransactions support confidence
##  virusTotal           183 0.28818    0.27634
##                                                                                      call
##  apriori(data = virusTotal, parameter = list(supp = 0.28818, conf = 0.27634, minlen = 2))</code></pre>
<p>Como podemos ver en el resumen, nos muestran datos de las reglas generadas, podemos ver por ejemplo que la media
obtenida en el soporte es de 0.28818 lo cual no es muy alto e indica que la media de las reglas obtenidas no son muy frecuentes.
La confianza tenemos una media de 0.27634 lo cual nos dice que la media en el dataset indica que el 27,63%
de las X tambien contienen a Y.</p>
<p>Estas son todas las reglas calculadas</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(mis_reglas)</span></code></pre></div>
<pre><code>##      lhs                                rhs                              support confidence  coverage     lift count
## [1]  {country=CA}                    =&gt; {times_submitted=[1,2)}        0.3060109  1.0000000 0.3060109 1.811881    56
## [2]  {times_submitted=[1,2)}         =&gt; {country=CA}                   0.3060109  0.5544554 0.5519126 1.811881    56
## [3]  {country=CA}                    =&gt; {Year=2021}                    0.3060109  1.0000000 0.3060109 1.500000    56
## [4]  {Year=2021}                     =&gt; {country=CA}                   0.3060109  0.4590164 0.6666667 1.500000    56
## [5]  {country=CA}                    =&gt; {file_type=ZIP}                0.3060109  1.0000000 0.3060109 1.464000    56
## [6]  {file_type=ZIP}                 =&gt; {country=CA}                   0.3060109  0.4480000 0.6830601 1.464000    56
## [7]  {file_type=DEX}                 =&gt; {country=CZ}                   0.3169399  1.0000000 0.3169399 3.155172    58
## [8]  {country=CZ}                    =&gt; {file_type=DEX}                0.3169399  1.0000000 0.3169399 3.155172    58
## [9]  {file_type=DEX}                 =&gt; {times_submitted=[2,3.54e+03]} 0.2950820  0.9310345 0.3169399 2.077796    54
## [10] {times_submitted=[2,3.54e+03]}  =&gt; {file_type=DEX}                0.2950820  0.6585366 0.4480874 2.077796    54
## [11] {country=CZ}                    =&gt; {times_submitted=[2,3.54e+03]} 0.2950820  0.9310345 0.3169399 2.077796    54
## [12] {times_submitted=[2,3.54e+03]}  =&gt; {country=CZ}                   0.2950820  0.6585366 0.4480874 2.077796    54
## [13] {size=[3.03,178]}               =&gt; {Year=2021}                    0.2896175  0.8688525 0.3333333 1.303279    53
## [14] {Year=2021}                     =&gt; {size=[3.03,178]}              0.2896175  0.4344262 0.6666667 1.303279    53
## [15] {size=[3.03,178]}               =&gt; {file_type=ZIP}                0.3005464  0.9016393 0.3333333 1.320000    55
## [16] {file_type=ZIP}                 =&gt; {size=[3.03,178]}              0.3005464  0.4400000 0.6830601 1.320000    55
## [17] {size=[1.85,3.03)}              =&gt; {times_submitted=[1,2)}        0.2950820  0.8852459 0.3333333 1.603960    54
## [18] {times_submitted=[1,2)}         =&gt; {size=[1.85,3.03)}             0.2950820  0.5346535 0.5519126 1.603960    54
## [19] {size=[1.85,3.03)}              =&gt; {Year=2021}                    0.3114754  0.9344262 0.3333333 1.401639    57
## [20] {Year=2021}                     =&gt; {size=[1.85,3.03)}             0.3114754  0.4672131 0.6666667 1.401639    57
## [21] {size=[1.85,3.03)}              =&gt; {file_type=ZIP}                0.3005464  0.9016393 0.3333333 1.320000    55
## [22] {file_type=ZIP}                 =&gt; {size=[1.85,3.03)}             0.3005464  0.4400000 0.6830601 1.320000    55
## [23] {positives=[19,23)}             =&gt; {file_type=ZIP}                0.2896175  0.7910448 0.3661202 1.158090    53
## [24] {file_type=ZIP}                 =&gt; {positives=[19,23)}            0.2896175  0.4240000 0.6830601 1.158090    53
## [25] {total=[62,64]}                 =&gt; {Year=2021}                    0.3497268  0.8888889 0.3934426 1.333333    64
## [26] {Year=2021}                     =&gt; {total=[62,64]}                0.3497268  0.5245902 0.6666667 1.333333    64
## [27] {total=[62,64]}                 =&gt; {file_type=ZIP}                0.3934426  1.0000000 0.3934426 1.464000    72
## [28] {file_type=ZIP}                 =&gt; {total=[62,64]}                0.3934426  0.5760000 0.6830601 1.464000    72
## [29] {times_submitted=[1,2)}         =&gt; {Year=2021}                    0.5519126  1.0000000 0.5519126 1.500000   101
## [30] {Year=2021}                     =&gt; {times_submitted=[1,2)}        0.5519126  0.8278689 0.6666667 1.500000   101
## [31] {times_submitted=[1,2)}         =&gt; {file_type=ZIP}                0.5300546  0.9603960 0.5519126 1.406020    97
## [32] {file_type=ZIP}                 =&gt; {times_submitted=[1,2)}        0.5300546  0.7760000 0.6830601 1.406020    97
## [33] {Year=2021}                     =&gt; {file_type=ZIP}                0.6338798  0.9508197 0.6666667 1.392000   116
## [34] {file_type=ZIP}                 =&gt; {Year=2021}                    0.6338798  0.9280000 0.6830601 1.392000   116
## [35] {times_submitted=[1,2),                                                                                        
##       country=CA}                    =&gt; {Year=2021}                    0.3060109  1.0000000 0.3060109 1.500000    56
## [36] {country=CA,                                                                                                   
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.3060109  1.0000000 0.3060109 1.811881    56
## [37] {times_submitted=[1,2),                                                                                        
##       Year=2021}                     =&gt; {country=CA}                   0.3060109  0.5544554 0.5519126 1.811881    56
## [38] {times_submitted=[1,2),                                                                                        
##       country=CA}                    =&gt; {file_type=ZIP}                0.3060109  1.0000000 0.3060109 1.464000    56
## [39] {country=CA,                                                                                                   
##       file_type=ZIP}                 =&gt; {times_submitted=[1,2)}        0.3060109  1.0000000 0.3060109 1.811881    56
## [40] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP}                 =&gt; {country=CA}                   0.3060109  0.5773196 0.5300546 1.886598    56
## [41] {country=CA,                                                                                                   
##       Year=2021}                     =&gt; {file_type=ZIP}                0.3060109  1.0000000 0.3060109 1.464000    56
## [42] {country=CA,                                                                                                   
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.3060109  1.0000000 0.3060109 1.500000    56
## [43] {file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {country=CA}                   0.3060109  0.4827586 0.6338798 1.577586    56
## [44] {country=CZ,                                                                                                   
##       file_type=DEX}                 =&gt; {times_submitted=[2,3.54e+03]} 0.2950820  0.9310345 0.3169399 2.077796    54
## [45] {times_submitted=[2,3.54e+03],                                                                                 
##       file_type=DEX}                 =&gt; {country=CZ}                   0.2950820  1.0000000 0.2950820 3.155172    54
## [46] {times_submitted=[2,3.54e+03],                                                                                 
##       country=CZ}                    =&gt; {file_type=DEX}                0.2950820  1.0000000 0.2950820 3.155172    54
## [47] {size=[1.85,3.03),                                                                                             
##       times_submitted=[1,2)}         =&gt; {Year=2021}                    0.2950820  1.0000000 0.2950820 1.500000    54
## [48] {size=[1.85,3.03),                                                                                             
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.2950820  0.9473684 0.3114754 1.716519    54
## [49] {times_submitted=[1,2),                                                                                        
##       Year=2021}                     =&gt; {size=[1.85,3.03)}             0.2950820  0.5346535 0.5519126 1.603960    54
## [50] {size=[1.85,3.03),                                                                                             
##       times_submitted=[1,2)}         =&gt; {file_type=ZIP}                0.2896175  0.9814815 0.2950820 1.436889    53
## [51] {size=[1.85,3.03),                                                                                             
##       file_type=ZIP}                 =&gt; {times_submitted=[1,2)}        0.2896175  0.9636364 0.3005464 1.745995    53
## [52] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP}                 =&gt; {size=[1.85,3.03)}             0.2896175  0.5463918 0.5300546 1.639175    53
## [53] {size=[1.85,3.03),                                                                                             
##       Year=2021}                     =&gt; {file_type=ZIP}                0.2950820  0.9473684 0.3114754 1.386947    54
## [54] {size=[1.85,3.03),                                                                                             
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.2950820  0.9818182 0.3005464 1.472727    54
## [55] {file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {size=[1.85,3.03)}             0.2950820  0.4655172 0.6338798 1.396552    54
## [56] {total=[62,64],                                                                                                
##       Year=2021}                     =&gt; {file_type=ZIP}                0.3497268  1.0000000 0.3497268 1.464000    64
## [57] {total=[62,64],                                                                                                
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.3497268  0.8888889 0.3934426 1.333333    64
## [58] {file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {total=[62,64]}                0.3497268  0.5517241 0.6338798 1.402299    64
## [59] {times_submitted=[1,2),                                                                                        
##       Year=2021}                     =&gt; {file_type=ZIP}                0.5300546  0.9603960 0.5519126 1.406020    97
## [60] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.5300546  1.0000000 0.5300546 1.500000    97
## [61] {file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.5300546  0.8362069 0.6338798 1.515108    97
## [62] {times_submitted=[1,2),                                                                                        
##       country=CA,                                                                                                   
##       Year=2021}                     =&gt; {file_type=ZIP}                0.3060109  1.0000000 0.3060109 1.464000    56
## [63] {times_submitted=[1,2),                                                                                        
##       country=CA,                                                                                                   
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.3060109  1.0000000 0.3060109 1.500000    56
## [64] {country=CA,                                                                                                   
##       file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.3060109  1.0000000 0.3060109 1.811881    56
## [65] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {country=CA}                   0.3060109  0.5773196 0.5300546 1.886598    56
## [66] {size=[1.85,3.03),                                                                                             
##       times_submitted=[1,2),                                                                                        
##       Year=2021}                     =&gt; {file_type=ZIP}                0.2896175  0.9814815 0.2950820 1.436889    53
## [67] {size=[1.85,3.03),                                                                                             
##       times_submitted=[1,2),                                                                                        
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.2896175  1.0000000 0.2896175 1.500000    53
## [68] {size=[1.85,3.03),                                                                                             
##       file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.2896175  0.9814815 0.2950820 1.778328    53
## [69] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {size=[1.85,3.03)}             0.2896175  0.5463918 0.5300546 1.639175    53</code></pre>
<p>Vamos a ordenar las reglas por lift y mostramos las 10 reglas con mas lift</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb18-1" aria-hidden="true" tabindex="-1"></a>mis_reglas_lift <span class="ot">&lt;-</span> <span class="fu">sort</span>(mis_reglas, <span class="at">by =</span> <span class="st">&quot;lift&quot;</span>)</span>
<span id="cb18-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(mis_reglas_lift[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>##      lhs                                rhs                              support confidence  coverage     lift count
## [1]  {file_type=DEX}                 =&gt; {country=CZ}                   0.3169399  1.0000000 0.3169399 3.155172    58
## [2]  {country=CZ}                    =&gt; {file_type=DEX}                0.3169399  1.0000000 0.3169399 3.155172    58
## [3]  {times_submitted=[2,3.54e+03],                                                                                 
##       file_type=DEX}                 =&gt; {country=CZ}                   0.2950820  1.0000000 0.2950820 3.155172    54
## [4]  {times_submitted=[2,3.54e+03],                                                                                 
##       country=CZ}                    =&gt; {file_type=DEX}                0.2950820  1.0000000 0.2950820 3.155172    54
## [5]  {file_type=DEX}                 =&gt; {times_submitted=[2,3.54e+03]} 0.2950820  0.9310345 0.3169399 2.077796    54
## [6]  {times_submitted=[2,3.54e+03]}  =&gt; {file_type=DEX}                0.2950820  0.6585366 0.4480874 2.077796    54
## [7]  {country=CZ}                    =&gt; {times_submitted=[2,3.54e+03]} 0.2950820  0.9310345 0.3169399 2.077796    54
## [8]  {times_submitted=[2,3.54e+03]}  =&gt; {country=CZ}                   0.2950820  0.6585366 0.4480874 2.077796    54
## [9]  {country=CZ,                                                                                                   
##       file_type=DEX}                 =&gt; {times_submitted=[2,3.54e+03]} 0.2950820  0.9310345 0.3169399 2.077796    54
## [10] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP}                 =&gt; {country=CA}                   0.3060109  0.5773196 0.5300546 1.886598    56</code></pre>
<p>Vamos a ordenar las reglas por support y mostramos las 10 reglas con mas support</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb20-1" aria-hidden="true" tabindex="-1"></a>mis_reglas_support <span class="ot">&lt;-</span> <span class="fu">sort</span>(mis_reglas, <span class="at">by =</span> <span class="st">&quot;support&quot;</span>)</span>
<span id="cb20-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(mis_reglas_support[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>##      lhs                                       rhs                    
## [1]  {Year=2021}                            =&gt; {file_type=ZIP}        
## [2]  {file_type=ZIP}                        =&gt; {Year=2021}            
## [3]  {times_submitted=[1,2)}                =&gt; {Year=2021}            
## [4]  {Year=2021}                            =&gt; {times_submitted=[1,2)}
## [5]  {times_submitted=[1,2)}                =&gt; {file_type=ZIP}        
## [6]  {file_type=ZIP}                        =&gt; {times_submitted=[1,2)}
## [7]  {times_submitted=[1,2), Year=2021}     =&gt; {file_type=ZIP}        
## [8]  {times_submitted=[1,2), file_type=ZIP} =&gt; {Year=2021}            
## [9]  {file_type=ZIP, Year=2021}             =&gt; {times_submitted=[1,2)}
## [10] {total=[62,64]}                        =&gt; {file_type=ZIP}        
##      support   confidence coverage  lift     count
## [1]  0.6338798 0.9508197  0.6666667 1.392000 116  
## [2]  0.6338798 0.9280000  0.6830601 1.392000 116  
## [3]  0.5519126 1.0000000  0.5519126 1.500000 101  
## [4]  0.5519126 0.8278689  0.6666667 1.500000 101  
## [5]  0.5300546 0.9603960  0.5519126 1.406020  97  
## [6]  0.5300546 0.7760000  0.6830601 1.406020  97  
## [7]  0.5300546 0.9603960  0.5519126 1.406020  97  
## [8]  0.5300546 1.0000000  0.5300546 1.500000  97  
## [9]  0.5300546 0.8362069  0.6338798 1.515108  97  
## [10] 0.3934426 1.0000000  0.3934426 1.464000  72</code></pre>
<p>Como sabemos, el soporte nos indica el porcentaje de frecuencia con el que pasa esa regla
vemos como cuando el año es 2021 en el 63,3% de la veces el tipo de archivo es ZIP</p>
<p>Vamos a ordenar las reglas por confianza y mostramos las 10 reglas con mas confianza</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb22-1" aria-hidden="true" tabindex="-1"></a>mis_reglas_confidence <span class="ot">&lt;-</span> <span class="fu">sort</span>(mis_reglas, <span class="at">by =</span> <span class="st">&quot;confidence&quot;</span>)</span>
<span id="cb22-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(mis_reglas_confidence[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>##      lhs                                    rhs                     support  
## [1]  {country=CA}                        =&gt; {times_submitted=[1,2)} 0.3060109
## [2]  {country=CA}                        =&gt; {Year=2021}             0.3060109
## [3]  {country=CA}                        =&gt; {file_type=ZIP}         0.3060109
## [4]  {file_type=DEX}                     =&gt; {country=CZ}            0.3169399
## [5]  {country=CZ}                        =&gt; {file_type=DEX}         0.3169399
## [6]  {total=[62,64]}                     =&gt; {file_type=ZIP}         0.3934426
## [7]  {times_submitted=[1,2)}             =&gt; {Year=2021}             0.5519126
## [8]  {times_submitted=[1,2), country=CA} =&gt; {Year=2021}             0.3060109
## [9]  {country=CA, Year=2021}             =&gt; {times_submitted=[1,2)} 0.3060109
## [10] {times_submitted=[1,2), country=CA} =&gt; {file_type=ZIP}         0.3060109
##      confidence coverage  lift     count
## [1]  1          0.3060109 1.811881  56  
## [2]  1          0.3060109 1.500000  56  
## [3]  1          0.3060109 1.464000  56  
## [4]  1          0.3169399 3.155172  58  
## [5]  1          0.3169399 3.155172  58  
## [6]  1          0.3934426 1.464000  72  
## [7]  1          0.5519126 1.500000 101  
## [8]  1          0.3060109 1.500000  56  
## [9]  1          0.3060109 1.811881  56  
## [10] 1          0.3060109 1.464000  56</code></pre>
<p>De aqui podemos sacar por ejemplo que el pais CA solo ha enviado archivos de tipo ZIP y en 2021 o tambien por ejemplo como vimos anteriormente en los graficos que el pais CZ siempre envia DEX de tipo de archivo.</p>
</div>
<div id="clustering" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Clustering<a href="regresion-reglas-de-asociación-y-clustering.html#clustering" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span></code></pre></div>
<p>Preparamos el kmeans con 4 centros y usaremos el tamaño frente al numero de positivos</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb25-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb25-3" aria-hidden="true" tabindex="-1"></a>virus <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span>   </span>
<span id="cb25-4"><a href="regresion-reglas-de-asociación-y-clustering.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">&quot;size&quot;</span>,<span class="st">&quot;positives&quot;</span>))<span class="sc">%&gt;%</span>   </span>
<span id="cb25-5"><a href="regresion-reglas-de-asociación-y-clustering.html#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kmeans</span>(<span class="at">centers=</span><span class="dv">4</span>, <span class="at">nstart=</span><span class="dv">10</span>)</span>
<span id="cb25-6"><a href="regresion-reglas-de-asociación-y-clustering.html#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="regresion-reglas-de-asociación-y-clustering.html#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(virus)</span></code></pre></div>
<pre><code>## List of 9
##  $ cluster     : int [1:183] 4 4 4 2 4 4 4 4 4 2 ...
##  $ centers     : num [1:4, 1:2] 178.36 1.76 74.81 4.49 15 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:4] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;
##   .. ..$ : chr [1:2] &quot;size&quot; &quot;positives&quot;
##  $ totss       : num 54130
##  $ withinss    : num [1:4] 0 912 1675 3606
##  $ tot.withinss: num 6193
##  $ betweenss   : num 47937
##  $ size        : int [1:4] 1 65 3 114
##  $ iter        : int 2
##  $ ifault      : int 0
##  - attr(*, &quot;class&quot;)= chr &quot;kmeans&quot;</code></pre>
<p>Vemos el tamaño de los clusters y de los centroides</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb27-1" aria-hidden="true" tabindex="-1"></a>virus<span class="sc">$</span>size</span></code></pre></div>
<pre><code>## [1]   1  65   3 114</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb29-1" aria-hidden="true" tabindex="-1"></a>virus<span class="sc">$</span>centers</span></code></pre></div>
<pre><code>##         size positives
## 1 178.355426  15.00000
## 2   1.761319  26.61538
## 3  74.811670  16.00000
## 4   4.487114  18.86842</code></pre>
<p>Ahora vamos a visualizar un grafico del tamaño(eje X) frente al numero de positivos(eje Y), lo dibujaremos con colores
segun el cluster al que pertenezcay la etiqueta sera el tipo de archivo analizado.</p>
<p>Como la grafica quedaba muy comprimida la vamos a mostrar por partes para un mejor entendimiento</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(virusTotal<span class="sc">$</span>size,virusTotal<span class="sc">$</span>positives, <span class="at">type=</span><span class="st">&quot;n&quot;</span>,<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>), <span class="at">xlab =</span> <span class="st">&quot;size&quot;</span>,<span class="at">ylab =</span> <span class="st">&quot;positives&quot;</span>)</span>
<span id="cb31-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x=</span>virusTotal<span class="sc">$</span>size, <span class="at">y=</span>virusTotal<span class="sc">$</span>positives, <span class="at">labels=</span>virusTotal<span class="sc">$</span>file_type,</span>
<span id="cb31-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb31-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span>virus<span class="sc">$</span>cluster<span class="sc">+</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>Aqui vemos los archivos de entre 0 y 10 gb que es donde se concentran la mayoria</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(virusTotal<span class="sc">$</span>size,virusTotal<span class="sc">$</span>positives, <span class="at">type=</span><span class="st">&quot;n&quot;</span>,<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">11</span>,<span class="dv">100</span>), <span class="at">xlab =</span> <span class="st">&quot;size&quot;</span>,<span class="at">ylab =</span> <span class="st">&quot;positives&quot;</span>)</span>
<span id="cb32-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x=</span>virusTotal<span class="sc">$</span>size, <span class="at">y=</span>virusTotal<span class="sc">$</span>positives, <span class="at">labels=</span>virusTotal<span class="sc">$</span>file_type,</span>
<span id="cb32-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb32-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span>virus<span class="sc">$</span>cluster<span class="sc">+</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>Aqui los archivos entre 11 y 100 gb que aunque haya menos tambien podemos ver los clusters en los que se agrupan</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(virusTotal<span class="sc">$</span>size,virusTotal<span class="sc">$</span>positives, <span class="at">type=</span><span class="st">&quot;n&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;size&quot;</span>,<span class="at">ylab =</span> <span class="st">&quot;positives&quot;</span>)</span>
<span id="cb33-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x=</span>virusTotal<span class="sc">$</span>size, <span class="at">y=</span>virusTotal<span class="sc">$</span>positives, <span class="at">labels=</span>virusTotal<span class="sc">$</span>file_type,</span>
<span id="cb33-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb33-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span>virus<span class="sc">$</span>cluster<span class="sc">+</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>Y por ultimo aqui ya vemos la gráfica al completo</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analizando-el-ssdeep.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="footnotes-and-citations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-RegresionYReglas.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
