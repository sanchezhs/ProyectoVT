<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Regresion, reglas de asociación y Clustering | Virus Total</title>
  <meta name="description" content="Este libro de bookdown contiene el proyecto LCC sobre analizar el dataset de VirusTotal." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Regresion, reglas de asociación y Clustering | Virus Total" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro de bookdown contiene el proyecto LCC sobre analizar el dataset de VirusTotal." />
  <meta name="github-repo" content="https://github.com/samuel-uma/ProyectoVT" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Regresion, reglas de asociación y Clustering | Virus Total" />
  
  <meta name="twitter:description" content="Este libro de bookdown contiene el proyecto LCC sobre analizar el dataset de VirusTotal." />
  

<meta name="author" content="Samuel Sánchez Toca y Alejandro Medina Astorga" />


<meta name="date" content="2022-06-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="analizando-el-ssdeep.html"/>
<link rel="next" href="conclusiones.html"/>
<script src="libs/header-attrs-2.13/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preprocesado de datos<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#inicio"><i class="fa fa-check"></i><b>1.1</b> Inicio<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#renombrando-los-archivos"><i class="fa fa-check"></i><b>1.2</b> Renombrando los archivos<span></span></a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#datos-iniciales"><i class="fa fa-check"></i><b>1.3</b> Datos iniciales<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#preprocesado"><i class="fa fa-check"></i><b>1.4</b> Preprocesado<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="analisis-exploratorio.html"><a href="analisis-exploratorio.html"><i class="fa fa-check"></i><b>2</b> Analisis exploratorio<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="analisis-exploratorio.html"><a href="analisis-exploratorio.html#dplyr"><i class="fa fa-check"></i><b>2.1</b> Dplyr<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="analisis-exploratorio.html"><a href="analisis-exploratorio.html#visualizacion"><i class="fa fa-check"></i><b>2.2</b> Visualizacion<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html"><i class="fa fa-check"></i><b>3</b> Analizando el <em>ssdeep</em><span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#sample1.c"><i class="fa fa-check"></i><b>3.1</b> sample1.c<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#sample2.c"><i class="fa fa-check"></i><b>3.2</b> sample2.c<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#sample3.c"><i class="fa fa-check"></i><b>3.3</b> sample3.c<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#analizando-los-json"><i class="fa fa-check"></i><b>3.4</b> Analizando los json<span></span></a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#matriz-de-adyacencias"><i class="fa fa-check"></i><b>3.4.1</b> Matriz de adyacencias<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#grafos"><i class="fa fa-check"></i><b>3.5</b> Grafos<span></span></a></li>
<li class="chapter" data-level="3.6" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#grafo-completo-g1"><i class="fa fa-check"></i><b>3.6</b> Grafo completo, G1<span></span></a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#análisis-del-componente"><i class="fa fa-check"></i><b>3.6.1</b> Análisis del componente<span></span></a></li>
<li class="chapter" data-level="3.6.2" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#algunos-gráficos-de-g1"><i class="fa fa-check"></i><b>3.6.2</b> Algunos gráficos de G1<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#grafo-de-distancias-10-para-g"><i class="fa fa-check"></i><b>3.7</b> Grafo de distancias &lt;= 10 para G<span></span></a></li>
<li class="chapter" data-level="3.8" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#análisis-del-mayor-componente-de-g"><i class="fa fa-check"></i><b>3.8</b> Análisis del mayor componente de G<span></span></a></li>
<li class="chapter" data-level="3.9" data-path="analizando-el-ssdeep.html"><a href="analizando-el-ssdeep.html#analizando-los-resultados-de-los-antivirus-de-g"><i class="fa fa-check"></i><b>3.9</b> Analizando los resultados de los antivirus de G<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="regresion-reglas-de-asociación-y-clustering.html"><a href="regresion-reglas-de-asociación-y-clustering.html"><i class="fa fa-check"></i><b>4</b> Regresion, reglas de asociación y Clustering<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="regresion-reglas-de-asociación-y-clustering.html"><a href="regresion-reglas-de-asociación-y-clustering.html#regresion"><i class="fa fa-check"></i><b>4.1</b> Regresion<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="regresion-reglas-de-asociación-y-clustering.html"><a href="regresion-reglas-de-asociación-y-clustering.html#reglas-de-asociación"><i class="fa fa-check"></i><b>4.2</b> Reglas de asociación<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="regresion-reglas-de-asociación-y-clustering.html"><a href="regresion-reglas-de-asociación-y-clustering.html#clustering"><i class="fa fa-check"></i><b>4.3</b> Clustering<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="conclusiones.html"><a href="conclusiones.html"><i class="fa fa-check"></i><b>5</b> Conclusiones<span></span></a></li>
<li class="chapter" data-level="6" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>6</b> Referencias<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Virus Total</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regresion-reglas-de-asociación-y-clustering" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Regresion, reglas de asociación y Clustering<a href="regresion-reglas-de-asociación-y-clustering.html#regresion-reglas-de-asociación-y-clustering" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="regresion" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Regresion<a href="regresion-reglas-de-asociación-y-clustering.html#regresion" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb98-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb98-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb98-4"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb98-5"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(backports)</span>
<span id="cb98-6"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-7"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-7" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;~/Documentos/LCC/ProyectoVT/Proyecto/virusTotal.csv&#39;</span>)</span>
<span id="cb98-8"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-9"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-9" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span> </span>
<span id="cb98-10"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">substr</span>(virusTotal<span class="sc">$</span>first_seen, <span class="dv">0</span>, <span class="dv">4</span>))</span>
<span id="cb98-11"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-12"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-12" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span></span>
<span id="cb98-13"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">country =</span> submission.submitter_country)</span>
<span id="cb98-14"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-15"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-15" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span></span>
<span id="cb98-16"><a href="regresion-reglas-de-asociación-y-clustering.html#cb98-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">file_type =</span> additional_info.exiftool.FileType)</span></code></pre></div>
<p>Pasamos el tamaño de los archivos a MB</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb99-1" aria-hidden="true" tabindex="-1"></a>virusTotal <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">size =</span> virusTotal<span class="sc">$</span>size<span class="sc">/</span><span class="dv">1000000</span>)</span></code></pre></div>
<p>Vamos a ver todas las gráficas de nuestro dataset:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(virusTotal)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
<p>Como vemos no parece que tengamos una relación directa por parte de dos variables, hemos pensado que estaría
bien analizar o ver si hay una relacion entre el tamaño que tiene un archivo y si es positivo o no, ya que
podriamos pensar de que al pesar más un archivo es más propenso a traer algun tipo de software malicioso.</p>
<p>Vamos a analizar el tamaño frente al numero de positivos para ver si existe algun tipo de correlación</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb101-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(virusTotal,<span class="fu">aes</span>(<span class="at">x=</span>size, <span class="at">y=</span>positives))<span class="sc">+</span><span class="fu">geom_point</span>()<span class="sc">+</span><span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb102-1" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(positives<span class="sc">~</span>size, <span class="at">data =</span> virusTotal)</span>
<span id="cb102-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(f1)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-67-2.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-67-3.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-67-4.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-67-5.png" width="672" /></p>
<p>Vemos un resumen del modelo</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(f1)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = positives ~ size, data = virusTotal)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -6.8717 -2.9135 -0.8898  3.0855 15.3370 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 21.91526    0.34738  63.088  &lt; 2e-16 ***
## size        -0.06463    0.01984  -3.258  0.00134 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 4.45 on 181 degrees of freedom
## Multiple R-squared:  0.0554, Adjusted R-squared:  0.05018 
## F-statistic: 10.62 on 1 and 181 DF,  p-value: 0.001339</code></pre>
<p>De aquí podemos sacar que la correlacion es prácticamente nula, solo el 5,54% de la variabilidad de los positivos tiene que ver con el tamaño, por lo tanto nuestro primer acercamiento es erróneo.</p>
<p>No obstante, hemos dibujado la gráfica y observamos que la tendencia es que a menor número de positivos tanto mayor es tamaño del archivo analizado.
Pero teniendo el cuenta los valores de R^2 ajustado y el p valor, este modelo no sirve para predecir y no podemos aceptar la hipótesis alternativa.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(virusTotal, <span class="fu">aes</span>(<span class="at">x =</span> size, <span class="at">y =</span> positives)) <span class="sc">+</span></span>
<span id="cb105-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb105-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> size, <span class="at">y =</span> <span class="fu">predict</span>(f1,virusTotal)),<span class="at">col=</span><span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
</div>
<div id="reglas-de-asociación" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Reglas de asociación<a href="regresion-reglas-de-asociación-y-clustering.html#reglas-de-asociación" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span></code></pre></div>
<p>Utilizamos apriori para buscar todas las reglas posibles con suporte &gt; 0.28 y confianza &gt; 0.27. Hemos impuesto una longitud mínima de dos para filtrar las reglas con antecedente vacío.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb107-1" aria-hidden="true" tabindex="-1"></a>mis_reglas <span class="ot">&lt;-</span> <span class="fu">apriori</span>(virusTotal,  <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.28818</span>, <span class="at">conf =</span> <span class="fl">0.27634</span>, <span class="at">minlen=</span><span class="dv">2</span>))</span></code></pre></div>
<pre><code>## Apriori
## 
## Parameter specification:
##  confidence minval smax arem  aval originalSupport maxtime support minlen maxlen target
##     0.27634    0.1    1 none FALSE            TRUE       5 0.28818      2     10  rules
##   ext
##  TRUE
## 
## Algorithmic control:
##  filter tree heap memopt load sort verbose
##     0.1 TRUE TRUE  FALSE TRUE    2    TRUE
## 
## Absolute minimum support count: 52 
## 
## set item appearances ...[0 item(s)] done [0.00s].
## set transactions ...[408 item(s), 183 transaction(s)] done [0.00s].
## sorting and recoding items ... [21 item(s)] done [0.00s].
## creating transaction tree ... done [0.00s].
## checking subsets of size 1 2 3 4 done [0.00s].
## writing ... [75 rule(s)] done [0.00s].
## creating S4 object  ... done [0.00s].</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(mis_reglas)</span></code></pre></div>
<pre><code>## [1] 75</code></pre>
<p>Este es el número de reglas que podemos encontrar en nuestro dataset.
El resumen de las reglas obtenidas sería el siguiente:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mis_reglas)</span></code></pre></div>
<pre><code>## set of 75 rules
## 
## rule length distribution (lhs + rhs):sizes
##  2  3  4 
## 40 27  8 
## 
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   2.000   2.000   2.000   2.573   3.000   4.000 
## 
## summary of quality measures:
##     support         confidence        coverage           lift           count       
##  Min.   :0.2896   Min.   :0.4240   Min.   :0.2896   Min.   :1.158   Min.   : 53.00  
##  1st Qu.:0.2951   1st Qu.:0.5773   1st Qu.:0.3060   1st Qu.:1.406   1st Qu.: 54.00  
##  Median :0.3060   Median :0.9474   Median :0.3333   Median :1.500   Median : 56.00  
##  Mean   :0.3392   Mean   :0.8311   Mean   :0.4377   Mean   :1.751   Mean   : 62.08  
##  3rd Qu.:0.3333   3rd Qu.:1.0000   3rd Qu.:0.5519   3rd Qu.:1.812   3rd Qu.: 61.00  
##  Max.   :0.6339   Max.   :1.0000   Max.   :0.6831   Max.   :3.155   Max.   :116.00  
## 
## mining info:
##        data ntransactions support confidence
##  virusTotal           183 0.28818    0.27634
##                                                                                      call
##  apriori(data = virusTotal, parameter = list(supp = 0.28818, conf = 0.27634, minlen = 2))</code></pre>
<p>Como podemos ver en el resumen, nos muestran datos de las reglas generadas, podemos ver que la media
obtenida en el soporte es de 0.28818, lo cual no es muy alto e indica que la media de las reglas obtenidas no son muy frecuentes.
La confianza tiene una media de 0.27634, es decir, 27.63% de las X también contienen a Y.</p>
<p>Estas son todas las reglas calculadas</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(mis_reglas)</span></code></pre></div>
<pre><code>##      lhs                                rhs                              support confidence  coverage     lift count
## [1]  {country=CA}                    =&gt; {times_submitted=[1,2)}        0.3060109  1.0000000 0.3060109 1.811881    56
## [2]  {times_submitted=[1,2)}         =&gt; {country=CA}                   0.3060109  0.5544554 0.5519126 1.811881    56
## [3]  {country=CA}                    =&gt; {Year=2021}                    0.3060109  1.0000000 0.3060109 1.500000    56
## [4]  {Year=2021}                     =&gt; {country=CA}                   0.3060109  0.4590164 0.6666667 1.500000    56
## [5]  {country=CA}                    =&gt; {file_type=ZIP}                0.3060109  1.0000000 0.3060109 1.464000    56
## [6]  {file_type=ZIP}                 =&gt; {country=CA}                   0.3060109  0.4480000 0.6830601 1.464000    56
## [7]  {file_type=DEX}                 =&gt; {country=CZ}                   0.3169399  1.0000000 0.3169399 3.155172    58
## [8]  {country=CZ}                    =&gt; {file_type=DEX}                0.3169399  1.0000000 0.3169399 3.155172    58
## [9]  {file_type=DEX}                 =&gt; {times_submitted=[2,3.54e+03]} 0.2950820  0.9310345 0.3169399 2.077796    54
## [10] {times_submitted=[2,3.54e+03]}  =&gt; {file_type=DEX}                0.2950820  0.6585366 0.4480874 2.077796    54
## [11] {country=CZ}                    =&gt; {times_submitted=[2,3.54e+03]} 0.2950820  0.9310345 0.3169399 2.077796    54
## [12] {times_submitted=[2,3.54e+03]}  =&gt; {country=CZ}                   0.2950820  0.6585366 0.4480874 2.077796    54
## [13] {...1=[122,183]}                =&gt; {X=[122,183]}                  0.3333333  1.0000000 0.3333333 3.000000    61
## [14] {X=[122,183]}                   =&gt; {...1=[122,183]}               0.3333333  1.0000000 0.3333333 3.000000    61
## [15] {size=[3.03,178]}               =&gt; {Year=2021}                    0.2896175  0.8688525 0.3333333 1.303279    53
## [16] {Year=2021}                     =&gt; {size=[3.03,178]}              0.2896175  0.4344262 0.6666667 1.303279    53
## [17] {size=[3.03,178]}               =&gt; {file_type=ZIP}                0.3005464  0.9016393 0.3333333 1.320000    55
## [18] {file_type=ZIP}                 =&gt; {size=[3.03,178]}              0.3005464  0.4400000 0.6830601 1.320000    55
## [19] {X=[61.7,122)}                  =&gt; {...1=[61.7,122)}              0.3333333  1.0000000 0.3333333 3.000000    61
## [20] {...1=[61.7,122)}               =&gt; {X=[61.7,122)}                 0.3333333  1.0000000 0.3333333 3.000000    61
## [21] {X=[1,61.7)}                    =&gt; {...1=[1,61.7)}                0.3333333  1.0000000 0.3333333 3.000000    61
## [22] {...1=[1,61.7)}                 =&gt; {X=[1,61.7)}                   0.3333333  1.0000000 0.3333333 3.000000    61
## [23] {size=[1.85,3.03)}              =&gt; {times_submitted=[1,2)}        0.2950820  0.8852459 0.3333333 1.603960    54
## [24] {times_submitted=[1,2)}         =&gt; {size=[1.85,3.03)}             0.2950820  0.5346535 0.5519126 1.603960    54
## [25] {size=[1.85,3.03)}              =&gt; {Year=2021}                    0.3114754  0.9344262 0.3333333 1.401639    57
## [26] {Year=2021}                     =&gt; {size=[1.85,3.03)}             0.3114754  0.4672131 0.6666667 1.401639    57
## [27] {size=[1.85,3.03)}              =&gt; {file_type=ZIP}                0.3005464  0.9016393 0.3333333 1.320000    55
## [28] {file_type=ZIP}                 =&gt; {size=[1.85,3.03)}             0.3005464  0.4400000 0.6830601 1.320000    55
## [29] {positives=[19,23)}             =&gt; {file_type=ZIP}                0.2896175  0.7910448 0.3661202 1.158090    53
## [30] {file_type=ZIP}                 =&gt; {positives=[19,23)}            0.2896175  0.4240000 0.6830601 1.158090    53
## [31] {total=[62,64]}                 =&gt; {Year=2021}                    0.3497268  0.8888889 0.3934426 1.333333    64
## [32] {Year=2021}                     =&gt; {total=[62,64]}                0.3497268  0.5245902 0.6666667 1.333333    64
## [33] {total=[62,64]}                 =&gt; {file_type=ZIP}                0.3934426  1.0000000 0.3934426 1.464000    72
## [34] {file_type=ZIP}                 =&gt; {total=[62,64]}                0.3934426  0.5760000 0.6830601 1.464000    72
## [35] {times_submitted=[1,2)}         =&gt; {Year=2021}                    0.5519126  1.0000000 0.5519126 1.500000   101
## [36] {Year=2021}                     =&gt; {times_submitted=[1,2)}        0.5519126  0.8278689 0.6666667 1.500000   101
## [37] {times_submitted=[1,2)}         =&gt; {file_type=ZIP}                0.5300546  0.9603960 0.5519126 1.406020    97
## [38] {file_type=ZIP}                 =&gt; {times_submitted=[1,2)}        0.5300546  0.7760000 0.6830601 1.406020    97
## [39] {Year=2021}                     =&gt; {file_type=ZIP}                0.6338798  0.9508197 0.6666667 1.392000   116
## [40] {file_type=ZIP}                 =&gt; {Year=2021}                    0.6338798  0.9280000 0.6830601 1.392000   116
## [41] {times_submitted=[1,2),                                                                                        
##       country=CA}                    =&gt; {Year=2021}                    0.3060109  1.0000000 0.3060109 1.500000    56
## [42] {country=CA,                                                                                                   
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.3060109  1.0000000 0.3060109 1.811881    56
## [43] {times_submitted=[1,2),                                                                                        
##       Year=2021}                     =&gt; {country=CA}                   0.3060109  0.5544554 0.5519126 1.811881    56
## [44] {times_submitted=[1,2),                                                                                        
##       country=CA}                    =&gt; {file_type=ZIP}                0.3060109  1.0000000 0.3060109 1.464000    56
## [45] {country=CA,                                                                                                   
##       file_type=ZIP}                 =&gt; {times_submitted=[1,2)}        0.3060109  1.0000000 0.3060109 1.811881    56
## [46] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP}                 =&gt; {country=CA}                   0.3060109  0.5773196 0.5300546 1.886598    56
## [47] {country=CA,                                                                                                   
##       Year=2021}                     =&gt; {file_type=ZIP}                0.3060109  1.0000000 0.3060109 1.464000    56
## [48] {country=CA,                                                                                                   
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.3060109  1.0000000 0.3060109 1.500000    56
## [49] {file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {country=CA}                   0.3060109  0.4827586 0.6338798 1.577586    56
## [50] {country=CZ,                                                                                                   
##       file_type=DEX}                 =&gt; {times_submitted=[2,3.54e+03]} 0.2950820  0.9310345 0.3169399 2.077796    54
## [51] {times_submitted=[2,3.54e+03],                                                                                 
##       file_type=DEX}                 =&gt; {country=CZ}                   0.2950820  1.0000000 0.2950820 3.155172    54
## [52] {times_submitted=[2,3.54e+03],                                                                                 
##       country=CZ}                    =&gt; {file_type=DEX}                0.2950820  1.0000000 0.2950820 3.155172    54
## [53] {size=[1.85,3.03),                                                                                             
##       times_submitted=[1,2)}         =&gt; {Year=2021}                    0.2950820  1.0000000 0.2950820 1.500000    54
## [54] {size=[1.85,3.03),                                                                                             
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.2950820  0.9473684 0.3114754 1.716519    54
## [55] {times_submitted=[1,2),                                                                                        
##       Year=2021}                     =&gt; {size=[1.85,3.03)}             0.2950820  0.5346535 0.5519126 1.603960    54
## [56] {size=[1.85,3.03),                                                                                             
##       times_submitted=[1,2)}         =&gt; {file_type=ZIP}                0.2896175  0.9814815 0.2950820 1.436889    53
## [57] {size=[1.85,3.03),                                                                                             
##       file_type=ZIP}                 =&gt; {times_submitted=[1,2)}        0.2896175  0.9636364 0.3005464 1.745995    53
## [58] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP}                 =&gt; {size=[1.85,3.03)}             0.2896175  0.5463918 0.5300546 1.639175    53
## [59] {size=[1.85,3.03),                                                                                             
##       Year=2021}                     =&gt; {file_type=ZIP}                0.2950820  0.9473684 0.3114754 1.386947    54
## [60] {size=[1.85,3.03),                                                                                             
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.2950820  0.9818182 0.3005464 1.472727    54
## [61] {file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {size=[1.85,3.03)}             0.2950820  0.4655172 0.6338798 1.396552    54
## [62] {total=[62,64],                                                                                                
##       Year=2021}                     =&gt; {file_type=ZIP}                0.3497268  1.0000000 0.3497268 1.464000    64
## [63] {total=[62,64],                                                                                                
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.3497268  0.8888889 0.3934426 1.333333    64
## [64] {file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {total=[62,64]}                0.3497268  0.5517241 0.6338798 1.402299    64
## [65] {times_submitted=[1,2),                                                                                        
##       Year=2021}                     =&gt; {file_type=ZIP}                0.5300546  0.9603960 0.5519126 1.406020    97
## [66] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.5300546  1.0000000 0.5300546 1.500000    97
## [67] {file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.5300546  0.8362069 0.6338798 1.515108    97
## [68] {times_submitted=[1,2),                                                                                        
##       country=CA,                                                                                                   
##       Year=2021}                     =&gt; {file_type=ZIP}                0.3060109  1.0000000 0.3060109 1.464000    56
## [69] {times_submitted=[1,2),                                                                                        
##       country=CA,                                                                                                   
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.3060109  1.0000000 0.3060109 1.500000    56
## [70] {country=CA,                                                                                                   
##       file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.3060109  1.0000000 0.3060109 1.811881    56
## [71] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {country=CA}                   0.3060109  0.5773196 0.5300546 1.886598    56
## [72] {size=[1.85,3.03),                                                                                             
##       times_submitted=[1,2),                                                                                        
##       Year=2021}                     =&gt; {file_type=ZIP}                0.2896175  0.9814815 0.2950820 1.436889    53
## [73] {size=[1.85,3.03),                                                                                             
##       times_submitted=[1,2),                                                                                        
##       file_type=ZIP}                 =&gt; {Year=2021}                    0.2896175  1.0000000 0.2896175 1.500000    53
## [74] {size=[1.85,3.03),                                                                                             
##       file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {times_submitted=[1,2)}        0.2896175  0.9814815 0.2950820 1.778328    53
## [75] {times_submitted=[1,2),                                                                                        
##       file_type=ZIP,                                                                                                
##       Year=2021}                     =&gt; {size=[1.85,3.03)}             0.2896175  0.5463918 0.5300546 1.639175    53</code></pre>
<p>Vamos a ordenar las reglas por lift y mostramos las diez reglas con más <em>lift</em></p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb115-1" aria-hidden="true" tabindex="-1"></a>mis_reglas_lift <span class="ot">&lt;-</span> <span class="fu">sort</span>(mis_reglas, <span class="at">by =</span> <span class="st">&quot;lift&quot;</span>)</span>
<span id="cb115-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(mis_reglas_lift[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>##      lhs                                              rhs               support  
## [1]  {file_type=DEX}                               =&gt; {country=CZ}      0.3169399
## [2]  {country=CZ}                                  =&gt; {file_type=DEX}   0.3169399
## [3]  {times_submitted=[2,3.54e+03], file_type=DEX} =&gt; {country=CZ}      0.2950820
## [4]  {times_submitted=[2,3.54e+03], country=CZ}    =&gt; {file_type=DEX}   0.2950820
## [5]  {...1=[122,183]}                              =&gt; {X=[122,183]}     0.3333333
## [6]  {X=[122,183]}                                 =&gt; {...1=[122,183]}  0.3333333
## [7]  {X=[61.7,122)}                                =&gt; {...1=[61.7,122)} 0.3333333
## [8]  {...1=[61.7,122)}                             =&gt; {X=[61.7,122)}    0.3333333
## [9]  {X=[1,61.7)}                                  =&gt; {...1=[1,61.7)}   0.3333333
## [10] {...1=[1,61.7)}                               =&gt; {X=[1,61.7)}      0.3333333
##      confidence coverage  lift     count
## [1]  1          0.3169399 3.155172 58   
## [2]  1          0.3169399 3.155172 58   
## [3]  1          0.2950820 3.155172 54   
## [4]  1          0.2950820 3.155172 54   
## [5]  1          0.3333333 3.000000 61   
## [6]  1          0.3333333 3.000000 61   
## [7]  1          0.3333333 3.000000 61   
## [8]  1          0.3333333 3.000000 61   
## [9]  1          0.3333333 3.000000 61   
## [10] 1          0.3333333 3.000000 61</code></pre>
<p>Vamos a ordenar las reglas por support y mostramos las diez reglas con más soporte</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb117-1" aria-hidden="true" tabindex="-1"></a>mis_reglas_support <span class="ot">&lt;-</span> <span class="fu">sort</span>(mis_reglas, <span class="at">by =</span> <span class="st">&quot;support&quot;</span>)</span>
<span id="cb117-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(mis_reglas_support[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>##      lhs                                       rhs                     support  
## [1]  {Year=2021}                            =&gt; {file_type=ZIP}         0.6338798
## [2]  {file_type=ZIP}                        =&gt; {Year=2021}             0.6338798
## [3]  {times_submitted=[1,2)}                =&gt; {Year=2021}             0.5519126
## [4]  {Year=2021}                            =&gt; {times_submitted=[1,2)} 0.5519126
## [5]  {times_submitted=[1,2)}                =&gt; {file_type=ZIP}         0.5300546
## [6]  {file_type=ZIP}                        =&gt; {times_submitted=[1,2)} 0.5300546
## [7]  {times_submitted=[1,2), Year=2021}     =&gt; {file_type=ZIP}         0.5300546
## [8]  {times_submitted=[1,2), file_type=ZIP} =&gt; {Year=2021}             0.5300546
## [9]  {file_type=ZIP, Year=2021}             =&gt; {times_submitted=[1,2)} 0.5300546
## [10] {total=[62,64]}                        =&gt; {file_type=ZIP}         0.3934426
##      confidence coverage  lift     count
## [1]  0.9508197  0.6666667 1.392000 116  
## [2]  0.9280000  0.6830601 1.392000 116  
## [3]  1.0000000  0.5519126 1.500000 101  
## [4]  0.8278689  0.6666667 1.500000 101  
## [5]  0.9603960  0.5519126 1.406020  97  
## [6]  0.7760000  0.6830601 1.406020  97  
## [7]  0.9603960  0.5519126 1.406020  97  
## [8]  1.0000000  0.5300546 1.500000  97  
## [9]  0.8362069  0.6338798 1.515108  97  
## [10] 1.0000000  0.3934426 1.464000  72</code></pre>
<p>Como sabemos, el soporte nos indica en qué porcentaje el patrón encontrado aparece en el dataset, y
vemos que cuando el año es 2021 en el 63,3% de la veces el tipo de archivo es ZIP.</p>
<p>Vamos a ordenar las reglas por confianza y mostramos las diez reglas con más confianza</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb119-1" aria-hidden="true" tabindex="-1"></a>mis_reglas_confidence <span class="ot">&lt;-</span> <span class="fu">sort</span>(mis_reglas, <span class="at">by =</span> <span class="st">&quot;confidence&quot;</span>)</span>
<span id="cb119-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(mis_reglas_confidence[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>##      lhs                  rhs                     support   confidence coverage  lift    
## [1]  {country=CA}      =&gt; {times_submitted=[1,2)} 0.3060109 1          0.3060109 1.811881
## [2]  {country=CA}      =&gt; {Year=2021}             0.3060109 1          0.3060109 1.500000
## [3]  {country=CA}      =&gt; {file_type=ZIP}         0.3060109 1          0.3060109 1.464000
## [4]  {file_type=DEX}   =&gt; {country=CZ}            0.3169399 1          0.3169399 3.155172
## [5]  {country=CZ}      =&gt; {file_type=DEX}         0.3169399 1          0.3169399 3.155172
## [6]  {...1=[122,183]}  =&gt; {X=[122,183]}           0.3333333 1          0.3333333 3.000000
## [7]  {X=[122,183]}     =&gt; {...1=[122,183]}        0.3333333 1          0.3333333 3.000000
## [8]  {X=[61.7,122)}    =&gt; {...1=[61.7,122)}       0.3333333 1          0.3333333 3.000000
## [9]  {...1=[61.7,122)} =&gt; {X=[61.7,122)}          0.3333333 1          0.3333333 3.000000
## [10] {X=[1,61.7)}      =&gt; {...1=[1,61.7)}         0.3333333 1          0.3333333 3.000000
##      count
## [1]  56   
## [2]  56   
## [3]  56   
## [4]  58   
## [5]  58   
## [6]  61   
## [7]  61   
## [8]  61   
## [9]  61   
## [10] 61</code></pre>
<p>De aquí podemos sacar que el pais CA solo ha enviado archivos de tipo ZIP en 2021, o también como mostramos en la parte de visualización que República Checa siempre envia DEX como tipo de archivo.</p>
</div>
<div id="clustering" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Clustering<a href="regresion-reglas-de-asociación-y-clustering.html#clustering" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span></code></pre></div>
<p>Preparamos el kmeans con 4 centros y usaremos el tamaño frente al número de positivos</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb122-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb122-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb122-3" aria-hidden="true" tabindex="-1"></a>virus <span class="ot">&lt;-</span> virusTotal <span class="sc">%&gt;%</span>   </span>
<span id="cb122-4"><a href="regresion-reglas-de-asociación-y-clustering.html#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">&quot;size&quot;</span>,<span class="st">&quot;positives&quot;</span>))<span class="sc">%&gt;%</span>   </span>
<span id="cb122-5"><a href="regresion-reglas-de-asociación-y-clustering.html#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kmeans</span>(<span class="at">centers=</span><span class="dv">4</span>, <span class="at">nstart=</span><span class="dv">10</span>)</span>
<span id="cb122-6"><a href="regresion-reglas-de-asociación-y-clustering.html#cb122-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-7"><a href="regresion-reglas-de-asociación-y-clustering.html#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(virus)</span></code></pre></div>
<pre><code>## List of 9
##  $ cluster     : int [1:183] 4 4 4 2 4 4 4 4 4 2 ...
##  $ centers     : num [1:4, 1:2] 178.36 1.76 74.81 4.49 15 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:4] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;
##   .. ..$ : chr [1:2] &quot;size&quot; &quot;positives&quot;
##  $ totss       : num 54130
##  $ withinss    : num [1:4] 0 912 1675 3606
##  $ tot.withinss: num 6193
##  $ betweenss   : num 47937
##  $ size        : int [1:4] 1 65 3 114
##  $ iter        : int 2
##  $ ifault      : int 0
##  - attr(*, &quot;class&quot;)= chr &quot;kmeans&quot;</code></pre>
<p>Vemos el tamaño de los clusters y de los centroides</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb124-1" aria-hidden="true" tabindex="-1"></a>virus<span class="sc">$</span>size</span></code></pre></div>
<pre><code>## [1]   1  65   3 114</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb126-1" aria-hidden="true" tabindex="-1"></a>virus<span class="sc">$</span>centers</span></code></pre></div>
<pre><code>##         size positives
## 1 178.355426  15.00000
## 2   1.761319  26.61538
## 3  74.811670  16.00000
## 4   4.487114  18.86842</code></pre>
<p>Ahora vamos a visualizar un gráfico del tamaño (eje X) frente al número de positivos (eje Y), lo dibujaremos con colores
según el cluster al que pertenezca y la etiqueta será el tipo de archivo analizado.</p>
<p>Como la gráfica quedaba muy comprimida la vamos a mostrar por partes para un mejor entendimiento</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(virusTotal<span class="sc">$</span>size,virusTotal<span class="sc">$</span>positives, <span class="at">type=</span><span class="st">&quot;n&quot;</span>,<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>), <span class="at">xlab =</span> <span class="st">&quot;size&quot;</span>,<span class="at">ylab =</span> <span class="st">&quot;positives&quot;</span>)</span>
<span id="cb128-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x=</span>virusTotal<span class="sc">$</span>size, <span class="at">y=</span>virusTotal<span class="sc">$</span>positives, <span class="at">labels=</span>virusTotal<span class="sc">$</span>file_type,</span>
<span id="cb128-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb128-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span>virus<span class="sc">$</span>cluster<span class="sc">+</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<p>Aqui vemos los archivos de entre 0 y 10 MB que es donde se concentran la mayoría</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(virusTotal<span class="sc">$</span>size,virusTotal<span class="sc">$</span>positives, <span class="at">type=</span><span class="st">&quot;n&quot;</span>,<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">11</span>,<span class="dv">100</span>), <span class="at">xlab =</span> <span class="st">&quot;size&quot;</span>,<span class="at">ylab =</span> <span class="st">&quot;positives&quot;</span>)</span>
<span id="cb129-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x=</span>virusTotal<span class="sc">$</span>size, <span class="at">y=</span>virusTotal<span class="sc">$</span>positives, <span class="at">labels=</span>virusTotal<span class="sc">$</span>file_type,</span>
<span id="cb129-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb129-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span>virus<span class="sc">$</span>cluster<span class="sc">+</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-81-1.png" width="672" /></p>
<p>Aqui los archivos entre 11 y 100 MB que aunque haya menos también podemos ver los clusters en los que se agrupan</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="regresion-reglas-de-asociación-y-clustering.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(virusTotal<span class="sc">$</span>size,virusTotal<span class="sc">$</span>positives, <span class="at">type=</span><span class="st">&quot;n&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;size&quot;</span>,<span class="at">ylab =</span> <span class="st">&quot;positives&quot;</span>)</span>
<span id="cb130-2"><a href="regresion-reglas-de-asociación-y-clustering.html#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x=</span>virusTotal<span class="sc">$</span>size, <span class="at">y=</span>virusTotal<span class="sc">$</span>positives, <span class="at">labels=</span>virusTotal<span class="sc">$</span>file_type,</span>
<span id="cb130-3"><a href="regresion-reglas-de-asociación-y-clustering.html#cb130-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span>virus<span class="sc">$</span>cluster<span class="sc">+</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
<p>Y por ultimo aqui ya vemos la gráfica al completo</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analizando-el-ssdeep.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusiones.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-RegresionYReglas.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
